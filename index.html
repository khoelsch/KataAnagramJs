<html>
  <head>
    <title>Anagram Kata</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <meta charset="UTF-8">
  </head>
  <body>
  
    <script type="text/javascript">

      function Dictionary() {
        return {};
      }

      function initializeDictionary() {
        var wordList = [ // TODO load wordlist from file
          'docu',
          'cudo',
          'menting'
        ];

        return new Dictionary();
      }

      function generateAnagramsFor(word, dictionary) {
        // Gegeben: Initialisiertes Dictionary

        // ---
        // First naive algorithm
        // ---
        // SUBROUTINE 'calculateAnagrams(word)'
          // Create 'wordChars': A list of characters of 'word'
          // FOREACH 'knownWord_01' in word list
            // Create 'knownWordChars_01': A list of characters of 'knownWord_01'
            // IF is 'knownWordChars_01' a subset of 'wordChars'?
              // YES (= found the first word of the (potential) anagram)
                // extract the subset of 'knownWordChars' from 'wordChars'
                // Create 'remainingWordChars'
                // --- Intended code duplication! ---
                // FOREACH 'knownWord_02' in word list
                  // Create 'knownWordChars_02': A list of characters of 'knownWord_02'
                  // IF is 'knownWordChars_02' equal to 'remainingWordChars'?
                    // YES (= found the second word of the anagram)
                      // remember 'knownWord_02' (ONE possible second part of the target anagram)
                      // Add anagram: 'knownWord_01' plus 'knownWord_02'


        return ['foo', 'bar'];
      }

      function printAnagrams() {
        var i;
        var CSS_ID_RESULT_LIST = 'anagrams';
        var startDate;
        var passedMillis;
        var dictionary;
        var anagrams;

        startDate = new Date();
        dictionary = initializeDictionary();
        anagrams = generateAnagramsFor("documenting", dictionary);
        passedMillis = new Date().getMilliseconds() - startDate.getMilliseconds();

        appendBulletPointTo(CSS_ID_RESULT_LIST, 'Generated ' + anagrams.length + ' anagrams. (took '+ passedMillis +'ms)');
        appendBulletPointTo(CSS_ID_RESULT_LIST, '=======================================');
        for (i=0; i<anagrams.length; ++i) {
          appendBulletPointTo(CSS_ID_RESULT_LIST, anagrams[i]);
        }
      }

      //
      // Helper function to display test results
      //
      function assert(expr, assumption) {
        var liCssClass = !!expr ? 'success' : 'failure';
        appendBulletPointTo('testResults', assumption, liCssClass);
      }

      function appendBulletPointTo(listCssId, plainTextToInsert, liCssClass) {
        var li = document.createElement('li');
        if (liCssClass) {
          li.className = liCssClass;
        }
        li.appendChild(document.createTextNode(plainTextToInsert));
        document.getElementById(listCssId).appendChild(li);
      }

      //
      // The tests
      //
      function assert_foo() {
        assert(1 === '1', 'Message.');
      }

      //
      // Execute our code, when document is loaded
      //
      window.onload = function() {
        assert_foo();
      };
    </script>

    <h1>Generate two-word anagrams of the word &quot;documenting&quot;</h1>
    <p>
      <button type="button" onclick="javascript:printAnagrams()">Make it so!</button>
      <ul id="anagrams"></ul>
    </p>

    <hr />

    <h1>Unittest Results</h1>
    <ul id="testResults"></ul>
  </body>
</html>